/* =============================================================
   ANNOUNCEMENT DETAILS PAGE STYLES
   ============================================================= */

/* 1. CONFIGURARE & VARIABILE
   ---------------------------------------------------------- */
:root {
  /* --- Layout & Shapes --- */
  --ad-card-radius: 12px;
  
  /* --- Colors: LIGHT MODE (Default) --- */
  --ad-bg-page: #ffffff;
  
  /* Cards & Surfaces */
  --ad-card-bg: linear-gradient(135deg, #ffffff 0%, #f8fafb 100%);
  --ad-card-border: rgba(53, 80, 112, 0.08);
  --ad-card-shadow: 0 8px 32px rgba(53, 80, 112, 0.08);
  --ad-card-border-hover: rgba(53, 80, 112, 0.15);
  --ad-card-shadow-hover: 0 12px 48px rgba(53, 80, 112, 0.12);
  
  /* Hero Overlay */
  --ad-hero-bg: linear-gradient(135deg, rgba(53, 80, 112, 0.03) 0%, transparent 100%);
  --ad-image-overlay: linear-gradient(135deg, rgba(53, 80, 112, 0.05) 0%, transparent 50%);
  
  /* Typography & Icons */
  --ad-text-primary: inherit; /* Mosteneste culoarea default a app-ului */
  --ad-text-secondary: inherit;
  --ad-title-gradient: linear-gradient(135deg, #355070, #406b92);
  
  /* Buttons & Navigation */
  --ad-nav-btn-bg: rgba(255, 255, 255, 0.95);
  --ad-nav-btn-text: inherit;
  --ad-nav-btn-border: rgba(255, 255, 255, 0.2);
  --ad-nav-btn-hover-bg: rgba(255, 255, 255, 1);
  --ad-nav-btn-shadow: 0 4px 16px rgba(0, 0, 0, 0.15);
  
  --ad-back-btn-hover: rgba(53, 80, 112, 0.08);
  
  /* Specific Elements */
  --ad-divider-bg: linear-gradient(90deg, transparent, rgba(53, 80, 112, 0.2), transparent);
  --ad-price-gradient: linear-gradient(135deg, #e53e3e, #ff6b6b);
  
  /* Scrollbar */
  --ad-scroll-track: #f1f1f1;
  --ad-scroll-thumb: #355070;
  --ad-scroll-thumb-hover: #406b92;
}

/* --- Dark Mode Overrides --- */
.dark-mode {
  /* Palette References (for internal use) */
  --p-primary: #f51866;
  --p-surface: #121212;
  --p-surface-elev: #282828;
  --p-text-muted: #8b8b8b;
  --p-text-light: #ffffff;

  /* --- Colors: DARK MODE --- */
  --ad-bg-page: var(--p-surface);
  
  /* Cards & Surfaces */
  --ad-card-bg: var(--p-surface); /* Solid background in dark mode */
  --ad-card-border: #8b8b8b; /* Fixed border color */
  --ad-card-shadow: 0 8px 32px rgba(0, 0, 0, 0.6);
  --ad-card-border-hover: #8b8b8b; /* Prevent color change on hover */
  --ad-card-shadow-hover: 0 12px 48px rgba(245, 24, 102, 0.2);
  
  /* Hero Overlay */
  --ad-hero-bg: var(--p-surface);
  --ad-image-overlay: linear-gradient(135deg, rgba(245, 24, 102, 0.1) 0%, transparent 50%);
  
  /* Typography */
  --ad-text-primary: var(--p-text-light);
  --ad-text-secondary: var(--p-text-muted);
  --ad-title-gradient: linear-gradient(135deg, #ffabb7, #f51866);
  
  /* Buttons & Navigation */
  --ad-nav-btn-bg: var(--p-surface-elev);
  --ad-nav-btn-text: #ffabb7;
  --ad-nav-btn-border: rgba(245, 24, 102, 0.3);
  --ad-nav-btn-hover-bg: #3f3f3f;
  --ad-nav-btn-shadow: 0 4px 16px rgba(245, 24, 102, 0.3);
  
  --ad-back-btn-hover: rgba(245, 24, 102, 0.1);
  
  /* Specific Elements */
  --ad-divider-bg: linear-gradient(90deg, transparent, rgba(245, 24, 102, 0.3), transparent);
  --ad-price-gradient: linear-gradient(135deg, #f51866, #fe6585);
  
  /* Scrollbar */
  --ad-scroll-track: #282828;
  --ad-scroll-thumb: #575757;
  --ad-scroll-thumb-hover: #717171;
}


/* 2. BASE & ANIMATIONS
   ---------------------------------------------------------- */
html { scroll-behavior: smooth; }

.announcement-details-page {
  min-height: 100vh;
  background: var(--ad-bg-page);
  transition: background-color 0.3s ease;
  font-family: 'Poppins', sans-serif;
  width: 100%;
  box-sizing: border-box;
}

.announcement-details-page * {
  font-family: 'Poppins', sans-serif !important;
}

/* Animations */
@keyframes slideInUp { from { opacity:0; transform:translateY(30px); } to { opacity:1; transform:translateY(0); } }
@keyframes slideInLeft { from { opacity:0; transform:translateX(-30px); } to { opacity:1; transform:translateX(0); } }
@keyframes slideInRight { from { opacity:0; transform:translateX(30px); } to { opacity:1; transform:translateX(0); } }

.updated-banner {
  opacity: 0;
  transform: translateY(-12px) scale(.98);
  transition: opacity .45s ease, transform .45s cubic-bezier(.4,0,.2,1);
}
.updated-banner.enter { opacity: 1; transform: translateY(0) scale(1); }
.updated-banner.exit { opacity: 0; transform: translateY(-14px) scale(.96); }

.MuiCard-root { animation: slideInUp 0.6s ease-out; }


/* 3. LAYOUT CONTAINERS
   ---------------------------------------------------------- */
.sidebar-sticky { 
  position: sticky; top: 120px; transition: all 0.3s ease; 
}

.announcement-hero-overlay { 
  background: var(--ad-hero-bg); 
  border-radius: var(--ad-card-radius); 
  padding: 2rem; 
}

.announcement-image-container { 
  position: relative; overflow: hidden; 
  border-radius: var(--ad-card-radius); 
  box-shadow: var(--ad-card-shadow); 
}

.announcement-image-container::before { 
  content:''; position:absolute; inset:0; 
  background: var(--ad-image-overlay); 
  pointer-events:none; z-index:1; 
}

.image-carousel-container { 
  position: relative; border-radius: var(--ad-card-radius); overflow: hidden; 
  box-shadow: var(--ad-card-shadow); 
}

/* --- Shared Card Surface Tokens --- */
.pf-card,
.seller-card,
.contact-paper,
.announcement-image-container,
.image-carousel-container,
.announcement-hero-overlay,
.announcement-location-map-box,
.MuiCard-root {
  background: var(--ad-card-bg) !important;
  border: 1px solid var(--ad-card-border) !important;
  border-radius: var(--ad-card-radius) !important;
  box-shadow: var(--ad-card-shadow) !important;
  transition: all .28s ease !important;
  /* Ensure text color is correct in dark mode for these containers */
  color: var(--ad-text-primary) !important;
}

/* Shared Hover States */
.pf-card:hover,
.seller-card:hover,
.contact-paper:hover,
.announcement-image-container:hover,
.image-carousel-container:hover,
.announcement-hero-overlay:hover,
.announcement-location-map-box:hover,
.MuiCard-root:hover {
  border-color: var(--ad-card-border-hover) !important;
  box-shadow: var(--ad-card-shadow-hover) !important;
}

/* Light-mode: ensure detail containers have a thin black outline (match notifications) */
body:not(.dark-mode) .pf-card,
body:not(.dark-mode) .seller-card,
body:not(.dark-mode) .contact-paper,
body:not(.dark-mode) .announcement-image-container,
body:not(.dark-mode) .image-carousel-container,
body:not(.dark-mode) .announcement-hero-overlay,
body:not(.dark-mode) .announcement-location-map-box,
body:not(.dark-mode) .MuiCard-root {
  border-color: #121212 !important;
}

/* Force inner typography to inherit color (fixes dark mode text) */
.pf-card .MuiTypography-root,
.seller-card .MuiTypography-root,
.MuiCard-root .MuiTypography-root,
.MuiTypography-body1, 
.MuiTypography-body2 {
  color: var(--ad-text-primary) !important;
}


/* 4. COMPONENTS
   ---------------------------------------------------------- */

/* Title */
.announcement-title {
  background: var(--ad-title-gradient);
  -webkit-background-clip: text; background-clip: text;
  -webkit-text-fill-color: transparent;
  font-weight: 800 !important; letter-spacing: -0.5px;
}

/* Divider */
.MuiDivider-root {
  background: var(--ad-divider-bg) !important;
  height: 1px !important; border: none !important; margin: 1.5rem 0 !important;
}

/* Back Button */
.back-button {
  margin-bottom: 2rem !important; padding: 8px 16px !important; 
  border-radius: 8px !important; transition: all .2s ease !important;
  color: var(--ad-text-secondary) !important; /* Fix for dark mode */
}
.back-button:hover {
  background: var(--ad-back-btn-hover) !important;
  transform: translateX(-4px) !important;
}

/* Carousel Navigation */
.carousel-navigation-btn {
  background: var(--ad-nav-btn-bg) !important;
  color: var(--ad-nav-btn-text) !important;
  backdrop-filter: blur(10px) !important;
  border: 1px solid var(--ad-nav-btn-border) !important;
}
.carousel-navigation-btn:hover {
  background: var(--ad-nav-btn-hover-bg) !important;
  box-shadow: var(--ad-nav-btn-shadow) !important;
}

/* Avatar */
.MuiAvatar-root {
  box-shadow: 0 4px 16px rgba(53,80,112,0.2) !important;
  border: 3px solid rgba(255,255,255,0.8) !important;
}
.dark-mode .MuiAvatar-root {
  border-color: rgba(245,24,102,0.3) !important;
}

/* Chips */
.MuiChip-root {
  font-weight: 600 !important; transition: all .2s ease !important;
}
.dark-mode .MuiChip-root {
  background-color: rgba(245,24,102,0.2) !important;
  color: var(--ad-text-secondary) !important;
  border: 1px solid rgba(245,24,102,0.3) !important;
}
.MuiChip-root:hover {
  transform: translateY(-1px) !important;
  box-shadow: 0 2px 8px rgba(53,80,112,0.15) !important;
}

/* Buttons (Generic MUI) */
.MuiButton-root {
  transition: all .3s cubic-bezier(0.4,0,0.2,1) !important;
}
.dark-mode .MuiButton-root { color: var(--ad-text-secondary) !important; }

/* Contained Buttons */
.dark-mode .MuiButton-contained {
  background-color: #f51866 !important; /* Primary */
  color: #121212 !important; /* Surface */
}
.dark-mode .MuiButton-contained:hover { background-color: #fa4875 !important; }

/* Outlined Buttons */
.dark-mode .MuiButton-outlined {
  border-color: #f51866 !important; color: #f51866 !important;
}
.dark-mode .MuiButton-outlined:hover {
  background-color: rgba(245,24,102,0.1) !important;
  border-color: #fa4875 !important;
}

.MuiButton-root:hover {
  transform: translateY(-2px) !important;
  box-shadow: 0 4px 20px rgba(53,80,112,0.2) !important;
}
.MuiIconButton-root { transition: all .2s cubic-bezier(0.4,0,0.2,1) !important; }
.MuiIconButton-root:hover { transform: scale(1.05) !important; }

/* Accessibility Focus */
.MuiButton-root:focus-visible, .MuiIconButton-root:focus-visible {
  outline: 2px solid #355070; outline-offset: 2px;
}
.dark-mode .MuiButton-root:focus-visible, 
.dark-mode .MuiIconButton-root:focus-visible {
  outline-color: #f51866;
}

/* Meta Footer */
.announcement-meta-footer {
  font-size: 12px; animation: slideInUp .5s ease;
  border-top: 1px solid transparent; /* Placeholder for dark mode border if needed */
}
.dark-mode .announcement-meta-footer {
  border-color: rgba(255,255,255,0.15) !important;
}
.announcement-meta-footer button svg { margin-right: 4px; }
.announcement-meta-footer .MuiTypography-caption { user-select: text; }


/* 5. UTILITIES / HELPERS
   ---------------------------------------------------------- */
/* Price Gradient */
.price-highlight {
  background: var(--ad-price-gradient);
  -webkit-background-clip: text; background-clip: text;
  -webkit-text-fill-color: transparent;
}

/* Description Scrollbar */
.description-text { max-height: 400px; overflow-y: auto; }
.description-text::-webkit-scrollbar { width: 6px; }
.description-text::-webkit-scrollbar-track { 
  background: var(--ad-scroll-track); border-radius: 3px; 
}
.description-text::-webkit-scrollbar-thumb { 
  background: var(--ad-scroll-thumb); border-radius: 3px; 
}
.description-text::-webkit-scrollbar-thumb:hover { 
  background: var(--ad-scroll-thumb-hover); 
}

/* Skeleton */
.MuiSkeleton-root { border-radius: var(--pf-card-radius, 12px) !important; }


/* 6. RESPONSIVE MEDIA QUERIES
   ---------------------------------------------------------- */
@media (max-width: 768px) {
  .sidebar-sticky { position: static; top: auto; }
  .MuiContainer-root { padding-left: 16px !important; padding-right: 16px !important; }
  .announcement-hero-overlay { padding: 1rem; }
}

@media (max-width: 600px) {
  /* Ensure footer meta area remains readable and doesn't clip content on very small screens */
  .announcement-meta-footer { overflow: visible; }
  .announcement-meta-footer .MuiTypography-caption { 
    white-space: normal; overflow: visible; text-overflow: initial; 
  }
  .announcement-meta-footer .MuiButton-root { 
    min-height: 28px; line-height: 1.2; 
  }
  .announcement-meta-footer .MuiButton-root .MuiSvgIcon-root, 
  .announcement-meta-footer .MuiButton-root svg { 
    margin-right: 2px; 
  }

  /* Small-screen adjustments to avoid content being pushed out of view */
  .announcement-hero-overlay { padding: 12px; }
  .announcement-image-container, .image-carousel-container { height: auto; max-height: 60vh; }
  .announcement-image-container img, .image-carousel-container img, .MuiCardMedia-root { width: 100%; height: auto; object-fit: cover; display: block; }
  .sidebar-sticky { position: static; }
  .MuiContainer-root { padding-left: 12px !important; padding-right: 12px !important; }
  .announcement-details-page { min-height: auto; padding-bottom: calc(var(--footer-height,65px) + env(safe-area-inset-bottom)); }
}

/* Page-scoped override: keep global app backgrounds white while this page is mounted */
.page-announcement-details {
  --bg-primary: #ffffff;
  --bg-secondary: #ffffff;
}