/* =============================================================
   FOOTER STYLES
   ============================================================= */

/* 1. CONFIGURARE & VARIABILE
   ---------------------------------------------------------- */
:root {
  /* --- Colors (Light Mode) --- */
  --ft-bg-main: var(--bg-secondary);
  --ft-text-main: var(--text-primary);
  
  /* Mobile Bar */
  --ft-mob-bg: var(--bg-secondary);
  --ft-mob-border: var(--border-color);
  --ft-mob-shadow: 0 -2px 12px rgba(0,0,0,0.1);
  --ft-mob-icon: var(--text-secondary);
  --ft-mob-icon-active: var(--primary);
  
  /* Publish Button */
  --ft-pub-bg: var(--primary);
  --ft-pub-text: var(--primary-contrast);
  --ft-pub-hover: var(--primary-hover);
  --ft-pub-shadow: 0 2px 8px rgba(26, 90, 135, 0.3);
  
  /* Publish Label */
  --ft-pub-label: #e2e7eb;
  
  /* Dropdown (if used here) */
  --ft-drop-bg: var(--bg-elevated);
  --ft-drop-border: transparent;
  --ft-drop-shadow: 0 14px 35px 0 rgba(9,9,12,0.4);
  
  /* Separator */
  --ft-separator: var(--border-color);
  
  /* Mobile Legal Spacing Tokens (as requested) */
  --mobile-legal-right-padding: 12px;
  --mobile-legal-left-padding: 20px;
  --mobile-legal-list-gap: 6px;
  --mobile-legal-list-margin-bottom: 2px;
  --mobile-legal-last-list-margin-bottom: 0px;
  --mobile-legal-link-font-size: 1.12rem;
  --mobile-legal-title-font-size: 1.25rem;
  --mobile-legal-title-margin-top: 42px;
  --mobile-legal-title-second-top: 28px;
}

/* --- Dark Mode Overrides --- */
.dark-mode {
  --ft-bg-main: var(--bg-secondary);
  --ft-text-main: var(--text-primary);
  
  /* Mobile Bar */
  --ft-mob-bg: var(--bg-secondary);
  --ft-mob-border: var(--border-color);
  --ft-mob-icon: var(--text-primary);
  --ft-mob-icon-active: var(--primary-hover);
  
  /* Publish Button (Dark Mode Outline Style) */
  --ft-pub-bg: var(--border-color);
  --ft-pub-text: var(--primary-contrast); /* Icon color */
  --ft-pub-hover: var(--primary);
  
  /* Publish Label */
  --ft-pub-label: var(--primary-contrast);
  --ft-pub-label-hover: var(--primary-hover);
  
  /* Dropdown */
  --ft-drop-bg: var(--bg-elevated);
  --ft-drop-border: var(--border-color);
  --ft-drop-shadow: 0 14px 35px 0 rgba(0,0,0,0.6);
  
  /* Separator */
  --ft-separator: var(--border-color);
}


/* 2. BASE FOOTER STYLES
   ---------------------------------------------------------- */
.footer {
  font-size: 20px;
  background: var(--ft-bg-main);
  color: var(--ft-text-main);
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  font-family: 'Poppins', sans-serif;
}

.footer * {
  font-family: 'Poppins', sans-serif !important;
}

.icon-arrow {
  width: 150px; height: 150px;
  cursor: pointer;
  margin-right: -100px; margin-bottom: -470px;
}

/* 3. DESKTOP FOOTER (Default visible, hidden on mobile via media query)
   ---------------------------------------------------------- */
.desktop-footer {
  display: block;
  width: 100%;
  text-align: center;
  margin-top: -12px;
  padding: 2px 0;
  background: var(--ft-bg-main);
  color: var(--ft-text-main);
}
.desktop-footer p { color: var(--ft-text-main); }

.footer-separator {
  width: 100%; height: 1px;
  background: var(--ft-separator);
  margin: 12px 0; border: none; box-sizing: content-box;
}

/* Utility to force hide desktop on mobile logic */
.desktop-only { display: block; }
@media (max-width: 1024px) {
  .desktop-only { display: none !important; }
}


/* 4. MOBILE FOOTER BAR (Sticky Bottom)
   ---------------------------------------------------------- */
.footer-mobile-buttons { display: none; } /* Hidden on desktop */

@media (max-width: 1024px) {
  /* Hide Desktop elements */
  .desktop-footer { display: none !important; }

  /* Mobile Bar Container */
  .footer-mobile-buttons {
    position: fixed !important; left: 0; bottom: 0;
    width: 100%; height: 65px;
    --footer-height: 65px;
    display: flex !important;
    flex-direction: column; justify-content: flex-end; align-items: center;
    background: var(--ft-mob-bg);
    border-top: 1px solid var(--ft-mob-border);
    box-shadow: var(--ft-mob-shadow);
    z-index: 1000; padding: 0;
    min-height: 60px; max-height: 80px;
    /* Safe Area */
    padding-bottom: max(0px, env(safe-area-inset-bottom, 0px));
  }

  /* Active Indicator */
  .footer-active-indicator {
    position: absolute; top: 0; height: 3px;
    background: var(--primary);
    border-radius: 0 0 2px 2px;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    z-index: 1001; opacity: 0; transform: translateY(-1px);
  }
  
  .footer-mobile-buttons:has(.footer-icon.active) .footer-active-indicator { opacity: 1; transform: translateY(0); }
  
  /* Indicator Positioning Logic */
  .footer-mobile-buttons:has(.footer-icon:nth-child(1).active) .footer-active-indicator { left: 0%; width: 20%; }
  .footer-mobile-buttons:has(.footer-icon:nth-child(2).active) .footer-active-indicator { left: 20%; width: 20%; }
  .footer-mobile-buttons:has(.footer-publish.active) .footer-active-indicator { left: 40%; width: 20%; }
  .footer-mobile-buttons:has(.footer-icon:nth-child(4).active) .footer-active-indicator { left: 60%; width: 20%; }
  .footer-mobile-buttons:has(.footer-icon:nth-child(5).active) .footer-active-indicator { left: 80%; width: 20%; }

  /* Icons Container */
  .footer-mobile-buttons .footer-icons {
    display: flex; justify-content: space-around; align-items: center;
    width: 100%; height: 100%; gap: 0; position: relative;
  }

  /* Individual Footer Icon */
  .footer-mobile-buttons .footer-icon {
    flex: 1; display: flex !important;
    flex-direction: column; align-items: center; justify-content: center;
    height: 100%; cursor: pointer;
    color: var(--ft-mob-icon);
    font-size: 0.7rem; gap: 0.2rem;
    transition: all 0.25s cubic-bezier(0.4, 0, 0.2, 1);
    text-decoration: none; border: none; background: none;
    padding: 0.5rem; position: relative;
    -webkit-tap-highlight-color: transparent; touch-action: manipulation;
  }

  .footer-mobile-buttons .footer-icon:hover { color: var(--ft-mob-icon-active); transform: translateY(-1px); }
  .footer-mobile-buttons .footer-icon:active { transform: translateY(0px) scale(0.96); }
  .footer-mobile-buttons .footer-icon.active { color: var(--primary); }

  /* Icon SVG & Text */
  .footer-mobile-buttons .footer-icon svg {
    width: 24px; height: 24px; margin-bottom: 0.2rem;
    stroke: currentColor; fill: currentColor; stroke-width: 1.5;
    transition: transform 0.2s; position: relative; z-index: 1;
  }
  .footer-mobile-buttons .footer-icon:hover svg { transform: scale(1.1); color: var(--ft-mob-icon-active); stroke: var(--ft-mob-icon-active); }
  .footer-mobile-buttons .footer-icon.active svg { transform: scale(1.05); }

  .footer-mobile-buttons .footer-icon span {
    font-size: 0.7rem; font-weight: 500; color: inherit;
    transition: transform 0.2s; position: relative; z-index: 1;
  }
  .footer-mobile-buttons .footer-icon:hover span { 
    transform: scale(1.05); color: var(--ft-mob-icon-active); 
  }

  /* --- Publish Button (Special Middle Button) --- */
  .footer-mobile-buttons .footer-publish { position: relative; }

  .footer-mobile-buttons .footer-publish-icon {
    background: var(--ft-pub-bg);
    color: var(--ft-pub-text);
    width: 32px; height: 32px; border-radius: 50%;
    display: flex; align-items: center; justify-content: center;
    line-height: 0; margin-bottom: 0.2rem;
    box-shadow: var(--ft-pub-shadow);
    transition: all 0.25s;
    /* Dark Mode specific border logic handled via bg variable */
    border: 2px solid transparent; 
  }
  /* Dark mode outline style application */
  .dark-mode .footer-mobile-buttons .footer-publish-icon { border-color: var(--ft-pub-bg); }

  .footer-mobile-buttons .footer-publish:hover .footer-publish-icon {
    background: var(--ft-pub-hover);
    transform: scale(1.1);
    box-shadow: 0 4px 12px rgba(26, 90, 135, 0.4);
  }
  .dark-mode .footer-mobile-buttons .footer-publish:hover .footer-publish-icon { border-color: var(--primary); }

  .footer-mobile-buttons .footer-publish:active .footer-publish-icon {
    transform: scale(0.95);
    box-shadow: 0 1px 4px rgba(26, 90, 135, 0.3);
  }

  .footer-publish .footer-publish-svg {
    display: block; line-height: 0; font-size: 22px; margin: 0;
    transition: transform 0.2s;
    /* Color override for dark mode hover */
    color: inherit; stroke: inherit;
  }
  .dark-mode .footer-publish:hover .footer-publish-svg { color: var(--app-surface); stroke: var(--app-surface); }

  .footer-mobile-buttons .footer-publish span {
    color: var(--primary); font-weight: 600;
  }

  /* Publish Label Animation (Hover) */
  .footer-publish-btn .footer-publish-label {
    font-size: 1.15rem; margin-top: 4px; display: none;
    color: var(--ft-pub-label);
    font-weight: 400; letter-spacing: 0.5px;
    transition: opacity 0.25s cubic-bezier(.4,0,.2,1);
    height: 0; overflow: hidden;
  }
  .footer-publish-btn:hover .footer-publish-label {
    display: block; opacity: 1; height: auto; pointer-events: auto; transition-delay: 0.08s;
  }
  .dark-mode .footer-publish-btn:hover .footer-publish-label { color: var(--ft-pub-label-hover); }
}


/* 5. MOBILE LEGAL SECTION (max-width: 1024px)
   ---------------------------------------------------------- */
.mobile-legal { display: none; }

@media (max-width: 1024px) {
  .mobile-legal {
    display: block; width: 100%; max-width: 960px;
    padding: 0 var(--mobile-legal-right-padding) 76px var(--mobile-legal-left-padding);
    box-sizing: border-box;
  }
  
  .mobile-legal__group { background: transparent; border: none; margin: 0 0 8px 0; }
  
  .mobile-legal__title {
    font-size: var(--mobile-legal-title-font-size);
    font-weight: 700; color: var(--app-text);
    margin: var(--mobile-legal-title-margin-top) 0 6px;
  }
  
  .mobile-legal__list {
    list-style: none; margin: 0 0 var(--mobile-legal-list-margin-bottom) 0;
    padding: 0; display: grid; grid-template-columns: 1fr;
    gap: var(--mobile-legal-list-gap);
  }
  
  .mobile-legal .mobile-legal__group + .mobile-legal__group .mobile-legal__title {
    margin-top: var(--mobile-legal-title-second-top);
  }
  
  .mobile-legal__group:last-of-type { margin-bottom: 0; }
  .mobile-legal__group:last-of-type .mobile-legal__list { margin-bottom: var(--mobile-legal-last-list-margin-bottom); }
  
  .mobile-legal__list a {
    text-decoration: none; color: var(--app-muted);
    font-size: var(--mobile-legal-link-font-size);
  }
  .mobile-legal__list a:hover { color: var(--primary); text-decoration: underline; }
  
  .mobile-legal-link {
    background: none;
    border: none;
    padding: 0;
    text-decoration: none;
    color: var(--app-muted);
    font-size: var(--mobile-legal-link-font-size);
    cursor: pointer;
    font-family: inherit;
  }
  .mobile-legal-link:hover { color: var(--primary); text-decoration: underline; }
  
  /* Legacy Desktop Legal Override hide */
  .legal-section { display: none !important; }
}


/* 6. DROPDOWN (Global footer logic)
   ---------------------------------------------------------- */
.section-dropdown.footer-dropdown {
  background-color: var(--ft-drop-bg);
  border: 1px solid var(--ft-drop-border);
  box-shadow: var(--ft-drop-shadow);
}
.section-dropdown.footer-dropdown a {
  background-color: var(--ft-drop-bg) !important;
  color: var(--ft-text-main) !important;
}
.section-dropdown.footer-dropdown a:hover {
  color: var(--ft-drop-bg) !important; /* Inverted logic usually */
  background-color: var(--primary) !important;
}


/* 7. PAGE-SPECIFIC HIDING LOGIC
   ---------------------------------------------------------- */
/* Hide desktop parts on mobile-opt-in pages */
@media (max-width: 1024px) {
  .footer.hide-on-mobile .legal-section,
  .footer.hide-on-mobile .footer-separator,
  .footer.hide-on-mobile .desktop-footer,
  .footer.hide-on-mobile .mobile-legal {
    display: none !important;
  }
  
  /* Logic specific for announcement details etc */
  .footer.hide-legal-upto-1200 .legal-section,
  .footer.hide-legal-upto-1200 .footer-separator,
  .footer.hide-legal-upto-1200 .desktop-footer,
  .footer.hide-legal-upto-1200 .mobile-legal {
    display: none !important;
  }
}


/* 8. RESPONSIVE UTILITIES
   ---------------------------------------------------------- */
/* Small Phones */
@media (max-width: 320px) {
  .footer-mobile-buttons { height: 60px; }
  .footer-mobile-buttons .footer-icon svg { width: 20px; height: 20px; }
  .footer-mobile-buttons .footer-icon span { font-size: 0.65rem; }
  .footer-mobile-buttons .footer-publish-icon { width: 28px; height: 28px; }
  .footer-publish .footer-publish-svg { font-size: 18px; }
}

/* Large Phones */
@media (min-width: 414px) {
  .footer-mobile-buttons { height: 70px; }
  .footer-mobile-buttons .footer-icon svg { width: 26px; height: 26px; }
  .footer-mobile-buttons .footer-icon span { font-size: 0.75rem; }
  .footer-mobile-buttons .footer-publish-icon { width: 36px; height: 36px; }
  .footer-publish .footer-publish-svg { font-size: 24px; }
}

/* Hide mobile footer when in chat on mobile */
.chat-mobile-active .footer-mobile-buttons {
  display: none !important;
}